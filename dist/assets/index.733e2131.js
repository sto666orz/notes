var e=Object.defineProperty,t=Object.assign,s=(t,s,i)=>("symbol"!=typeof s&&(s+=""),s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i);import{p as i,a,w as n,o,c as l,b as r,v as c,d,t as u,T as m,e as p,r as g,f as h,g as y,h as v,i as b,j as _,n as f,k as x,F as w,l as S,m as k,q as A,s as T,u as M,x as P,y as q,N as j,z as C,A as E,B as O,C as z,D as B,E as V,G,H as R,I as L,J as D,K as I}from"./vendor.fed13c38.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const i=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,n)=>{const o=new URL(e,i);if(self[t].moduleMap[o])return s(self[t].moduleMap[o]);const l=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){n(new Error(`Failed to import: ${e}`)),a(r)},onload(){s(self[t].moduleMap[o]),a(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("assets/");const Y={props:{toast:[String,Boolean]},emits:["update:toast"],setup(e,t){let s=null;n((i=>{clearTimeout(s),e.toast&&(s=setTimeout((()=>{t.emit("update:toast",null),s=null}),2e3))}))}},H=p("data-v-69461748");i("data-v-69461748");const X={class:"window-toast"},K={class:"toast-text"};a();const Q=H(((e,t,s,i,a,n)=>(o(),l(m,{name:"fade"},{default:H((()=>[r(d("div",X,[d("p",K,u(s.toast),1)],512),[[c,s.toast]])])),_:1}))));function U(e){var t=parseInt(e),s=0;t>=60&&(s=parseInt(t/60),t=parseInt(t%60));var i="";return i+=s>=10?s:"0"+s,i+=":"+(t>=10?t:"0"+t)}Y.render=Q,Y.__scopeId="data-v-69461748";const F={components:{FollowToast:Y},props:{fullScreen:Boolean,sources:{type:String,required:!0},timeline:{type:Array,required:!0},title:String,thumb:String},emits:["update:fullScreen","initVideo","closeVideo","progress","timeupdate","durationchange","allpass"],setup(e,s){const i=g({meetThePlay:!1,helloVideo:{width:0,height:0,portrait:!0},inPassProgress:!1,isPlayEnd:!1,toast:""}),a=g({hidden:!1,totalTime:0,currentTime:0,loading:!1,playing:!1,isError:!1,hideClock:null}),n=g({lastTouchesX:0,lastTouchesY:0,isMoved:!1,position:0,passedTime:-1,nextTime:-1}),o=h((()=>i.helloVideo.portrait?{width:i.helloVideo.height+"px",height:i.helloVideo.width+"px"}:{width:i.helloVideo.width+"px",height:i.helloVideo.height+"px"})),l=h((()=>{const e=i.helloVideo.width,t=i.helloVideo.height;return i.helloVideo.portrait?t/10:e/10})),r=h((()=>{const t=n.nextTime,s=e.timeline.find((e=>e>t));return"number"==typeof s?s:-1})),c=h((()=>{const t=n.passedTime,s=e.timeline.find((e=>e>t));return"number"==typeof s?s:-1})),d=y(null),u=y(null);function m(){!function(e){e.hidden=!1,e.totalTime=0,e.currentTime=0,e.loading=!1,e.playing=!1,e.isError=!1,e.hideClock=null}(a),function(e){e.lastTouchesX=0,e.lastTouchesY=0,e.isMoved=!1,e.position=0,e.passedTime=-1,e.nextTime=-1}(n),a.loading=!0,f((()=>{!function(){const e=d.value,t=20;let o=t;const l=()=>{if(++o%t==0){o=1;const t=Math.floor(e.currentTime);t!==a.currentTime&&(a.currentTime=t,s.emit("timeupdate",t)),n.isMoved||(n.position=x(t)),a.loading||p()}e.ended||e.paused||window.requestAnimationFrame(l)},r=t=>{a.loading=!1,e.play(),e.muted&&(e.muted=!1)},c=e=>{console.log("loaderror"),a.loading=!1},u=t=>{a.totalTime=Math.floor(e.duration),s.emit("durationchange",e.duration)},m=e=>{a.playing=!0,window.requestAnimationFrame(l)},g=e=>{console.log("videopause"),a.playing=!1},h=e=>{i.isPlayEnd=!0},y=e=>{a.loading=!0},b=e=>{a.loading=!1,window.requestAnimationFrame(l)};e.addEventListener("loadedmetadata",r),e.addEventListener("durationchange",u),e.addEventListener("canplaythrough",b),e.addEventListener("error",c),e.addEventListener("play",m),e.addEventListener("pause",g),e.addEventListener("ended",h),e.addEventListener("waiting",y),v((()=>{e.removeEventListener("loadedmetadata",r),e.removeEventListener("durationchange",u),e.removeEventListener("canplaythrough",b),e.removeEventListener("error",c),e.removeEventListener("play",m),e.removeEventListener("pause",g),e.removeEventListener("ended",h),e.removeEventListener("waiting",y)}))}(),w()})),s.emit("initVideo")}function p(){const e=d.value,t=r.value;return t>=0&&a.currentTime>=t&&(e.pause(),new Promise(((e,a)=>{i.inPassProgress=!0,s.emit("progress",t,e,a)})).then((()=>{t>n.passedTime&&(n.passedTime=t),n.nextTime=t,r.value<0&&s.emit("allpass"),e.play()})).catch((()=>{})).finally((()=>{i.inPassProgress=!1})),!0)}function x(e){let t=a.totalTime;if(t<=0)return 0;let s=e/t*100;return s<100?Number(s.toFixed(4)):100}function w(e=5e3){null!==a.hideClock&&(clearTimeout(a.hideClock),a.hideClock=null),e>0&&(a.hideClock=setTimeout((()=>{a.hidden=!0}),e))}const S=()=>{setTimeout((()=>{i.helloVideo.width=window.outerWidth||document.body.clientWidth,i.helloVideo.height=window.outerHeight||document.body.clientHeight}),10)};let k=-1;const A=()=>{const e=d.value;e&&(document.hidden?(e.pause(),k=e.currentTime):k>=0&&e.currentTime!==k&&(e.currentTime=k))},T=e=>{i.helloVideo.portrait=e.matches};document.addEventListener("visibilitychange",A),window.addEventListener("resize",S);const M=window.matchMedia("(orientation: portrait)");return M.addListener(T),v((()=>{window.removeEventListener("resize",S),document.removeEventListener("visibilitychange",A),M.removeListener(T)})),S(),T(M),e.fullScreen&&e.sources&&m(),b((()=>e.fullScreen),(e=>{e?m():(i.isPlayEnd=!1,i.inPassProgress=!1,function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitCancelFullScreen)document.webkitCancelFullScreen();else{if(!document.mozCancelFullScreen)return!1;document.mozCancelFullScreen()}}())})),t(t({},_(i)),{control:a,progress:n,videoRef:d,helloScreenRef:u,matchesStyle:o,fontSize:l,nextPassTime:r,maxPassTime:c,tryFullScreen:function(){!e.fullScreen&&e.sources&&s.emit("update:fullScreen",!0),f((()=>{!function(e){if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullScreen)e.webkitRequestFullScreen();else{if(!e.mozRequestFullScreen)return!1;e.mozRequestFullScreen()}}(u.value)}))},togglePlay:function(){const e=d.value;p()||(a.playing?e.pause():e.play()),w()},closeVideo:function(){s.emit("update:fullScreen",!1),s.emit("closeVideo");const e=d.value;e.paused||e.pause()},toggleControl:function(){a.hidden=!a.hidden},startMoveProgress:function(e){n.isMoved=!0;const t=e.touches[0];n.lastTouchesX=t.clientX,n.lastTouchesY=t.clientY,a.playing&&d.value.pause(),w(0)},moveProgress:function(e){if(a.totalTime<=0)return;const t=e.touches[0];let s=n.lastTouchesX-t.clientX,o=n.lastTouchesY-t.clientY;n.lastTouchesX=t.clientX,n.lastTouchesY=t.clientY;const l=c.value>=0?x(c.value):100;let r=n.position;r-=100*(i.helloVideo.portrait?o/i.helloVideo.height:s/i.helloVideo.width),r=Math.max(r,0),r=Math.min(r,l),n.position=r},endMoveProgress:function(t){if(n.isMoved=!1,a.totalTime<=0)return;let s=n.position/100*a.totalTime,o=Math.floor(s);e.timeline.findIndex((e=>e===o))>=0&&(s=o);const l=d.value;l.currentTime=s,a.currentTime=l.currentTime,n.nextTime=l.currentTime-.01,n.position=x(o);const r=c.value,u=r>=0?x(r):100;r>=0&&n.position>=u&&(i.toast="请先完成本练习，才能学习后面的内容"),w()},getProgressPercent:x,sandClockControl:w,formatSeconds:U})}},W=p("data-v-bc4ca380");i("data-v-bc4ca380");const N=d("img",{src:"data:image/png;base64,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",class:"thumb-play"},null,-1),Z={class:"title"},J={class:"control-main"},$={class:"play-time"},ee={class:"control-progress"},te={class:"flag-number"},se={class:"flag-number-text"},ie={class:"play-total"},ae={class:"hello-pop-mask"},ne=d("img",{class:"loading-icon",src:"./assets/loading-icon.20717b30.svg",alt:""},null,-1),oe=d("p",{class:"loading-text"},"缓冲中...",-1),le={key:0,class:"hello-pop-mask"},re=d("p",{class:"loading-text"},"视频加载失败",-1),ce={key:0,class:"hello-screen"},de={key:1,class:"hello-screen"};a();const ue=W(((e,t,s,i,a,n)=>{const p=x("follow-toast");return o(),l("div",{class:"hello-video",style:`font-size: ${i.fontSize}px`},[d("div",{class:"hello-thumb",onClick:t[1]||(t[1]=e=>i.tryFullScreen())},[d("img",{src:s.thumb,class:"thumb-cover"},null,8,["src"]),N]),s.fullScreen?(o(),l("div",{key:0,class:"hello-screen",ref:"helloScreenRef",onTouchstart:t[9]||(t[9]=e=>i.sandClockControl()),onTouchmove:t[10]||(t[10]=e=>i.sandClockControl()),onTouchend:t[11]||(t[11]=e=>i.sandClockControl())},[d("div",{class:"matches-screen",style:i.matchesStyle},[d("section",{class:"video-background",onClick:t[2]||(t[2]=(...e)=>i.toggleControl&&i.toggleControl(...e))},[d("video",{src:s.sources,ref:"videoRef",width:e.helloVideo.portrait?e.helloVideo.height:e.helloVideo.width,height:e.helloVideo.portrait?e.helloVideo.width:e.helloVideo.height,"x-webkit-airplay":"true","x5-playsinline":"true","webkit-playsinline":"true",playsinline:"true"}," 您的浏览器版本太低,不支持播放视频 ",8,["src","width","height"])]),d("header",{class:["hello-header",{"is-hide":i.control.hidden}]},[d("i",{class:"btn-back",onClick:t[3]||(t[3]=e=>i.closeVideo())}),d("span",Z,u(s.title),1)],2),d("footer",{class:["hello-control",{"is-hide":i.control.hidden}]},[d("i",{class:["btn-play",{"is-pause":!i.control.playing}],onClick:t[4]||(t[4]=(...e)=>i.togglePlay&&i.togglePlay(...e))},null,2),d("div",J,[d("p",$,u(i.formatSeconds(i.control.currentTime)),1),d("div",ee,[d("div",{class:"progress-over",style:`width: ${i.progress.position}%`},null,4),!i.control.hidden&&i.control.totalTime>0?(o(!0),l(w,{key:0},S(s.timeline,((e,t)=>(o(),l("div",{key:e,class:["progress-flag",{"is-pass":i.progress.passedTime>=e,"is-move":i.progress.isMoved}],style:`left: ${i.getProgressPercent(e)}%`},[d("div",te,[d("p",se,u(t+1),1)])],6)))),128)):k("",!0),d("div",{class:"progress-current",style:`left: ${i.progress.position}%`,onTouchstart:t[5]||(t[5]=(...e)=>i.startMoveProgress&&i.startMoveProgress(...e)),onTouchmove:t[6]||(t[6]=(...e)=>i.moveProgress&&i.moveProgress(...e)),onTouchend:t[7]||(t[7]=(...e)=>i.endMoveProgress&&i.endMoveProgress(...e))},[d("i",{class:["progress-current-point",{"is-move":i.progress.isMoved}]},null,2)],36)]),d("p",ie,u(i.formatSeconds(i.control.totalTime)),1)])],2),r(d("div",ae,[ne,oe],512),[[c,i.control.loading]]),i.control.isError?(o(),l("div",le,[re])):k("",!0),d(p,{toast:e.toast,"onUpdate:toast":t[8]||(t[8]=t=>e.toast=t)},null,8,["toast"])],4)],544)):k("",!0),d(m,{name:"slide"},{default:W((()=>[e.inPassProgress?(o(),l("div",ce,[d("div",{class:"matches-screen",style:i.matchesStyle},[A(e.$slots,"mask",{portrait:e.helloVideo.portrait})],4)])):k("",!0)])),_:1}),e.isPlayEnd?(o(),l("div",de,[d("div",{class:"matches-screen",style:i.matchesStyle},[A(e.$slots,"end",{currentTime:i.control.currentTime})],4)])):k("",!0)],4)}));F.render=ue,F.__scopeId="data-v-bc4ca380";const me={components:{FollowToast:Y},props:{portrait:{type:Boolean,default:!0},questions:{type:Array,required:!0},questionRandom:{type:Boolean,default:!1}},emits:["complete","abort"],setup(e,s){const i=g({questionsAdapter:[],analysisHeight:0,selectedAnswer:null,questionIndex:0,mainView:!0,isAudioEnd:{stemAudio:!1,analysisAudio:!0},touches:{lastX:0,lastY:0,moveing:!1},wrongCount:0,rightCount:0,toast:""}),a=y(null),n=y(null),o=y(null),l=y(null),r=h((()=>{const t=i.questionIndex;return t<0||t>=e.questions.length?(console.error("下发题目数据为空或下标越界"),null):i.questionsAdapter[t]})),c=h((()=>{const e=r.value;return e?e.stem:{}})),d=h((()=>{const e=r.value;return e?e.options:[]})),u=h((()=>{const e=r.value;return e?e.analysis:{}}));const m=(e.questionRandom?[...e.questions].sort((()=>.5-Math.random())):e.questions).map((e=>{const t={text:"",image:"",audio:""},s={text:"",image:"",audio:""};e.question_stem.forEach((e=>{1===e.stem_type?t.text=e.stem_content:2===e.stem_type?t.image=e.stem_content:3===e.stem_type&&(t.audio=e.stem_content)})),e.question_analysis.forEach((e=>{1===e.analysis_type?s.text=e.analysis_content:2===e.analysis_type?s.image=e.analysis_content:3===e.analysis_type&&(s.audio=e.analysis_content)}));const i=e.question_option.slice(0,2).map((e=>({answer:e.is_answer,image:e.option_img||"",text:e.option_text})));return 0===e.options_order&&i.sort((()=>.5-Math.random())),{stem:t,analysis:s,options:i,horizontal:!0,loading:!0}})),p=g(m);return p.forEach(((e,t)=>{const s=[];e.options.forEach((e=>{e.image&&s.push(new Promise(((s,i)=>{setTimeout((()=>{let t=new Image;t.src=e.image,t.onload=()=>s(t),t.onerror=()=>i()}),500*t)})))})),console.log("loadAll",s),Promise.all(s).then((t=>{2===t.length&&t.every((e=>e.width/e.height>=3.5))&&(e.horizontal=!1)})).finally((()=>{e.loading=!1}))})),i.questionsAdapter=p,t(t({},_(i)),{analysisRef:a,audioRef:n,analysisAudioRef:o,stemAudioRef:l,questionCurrent:r,questionsStem:c,questionOptions:d,questionAnalysis:u,selectAnswer:function(e){if(null===i.selectedAnswer&&(i.selectedAnswer=e,!e.answer)){const e=a.value;i.analysisHeight=e.clientHeight}},nextQuestion:function(){i.selectedAnswer?(i.selectedAnswer.answer?i.rightCount++:i.wrongCount++,i.questionIndex<i.questionsAdapter.length-1?i.questionIndex++:s.emit("complete",i.rightCount,i.wrongCount),i.analysisHeight=0,i.selectedAnswer=null,i.isAudioEnd.stemAudio=!1,i.isAudioEnd.analysisAudio=!0,i.mainView=!1,f((()=>{i.mainView=!0}))):i.toast="请先选择当前答案"},closeView:function(){s.emit("abort")},loadedmetadata:function(e){e&&e.play()},playended:function(e){i.isAudioEnd[e]=!0},playerror:function(e){i.isAudioEnd[e]=!0,console.log("音频加载失败")},replayAudio:function(e,t){if(u.value.audio){const e=o.value;e.pause(),e.currentTime=0,i.isAudioEnd.analysisAudio=!0}if(c.value.audio){const e=l.value;e.pause(),e.currentTime=0,i.isAudioEnd.stemAudio=!0}i.isAudioEnd[e]=!1,t.play()},startMoveAnalysis:function(e){const t=e.touches[0];i.touches.lastX=t.clientX,i.touches.lastY=t.clientY,i.touches.moveing=!0},moveAnalysis:function(e){if(!i.selectedAnswer||i.selectedAnswer.answer)return;const t=e.touches[0],s=i.touches.lastX-t.clientX,n=i.touches.lastY-t.clientY;i.portrait;const o=i.portrait?-s:n,l=a.value.clientHeight;let r=Math.min(i.analysisHeight+o,l);i.analysisHeight=Math.max(r,0),i.touches.lastX=t.clientX,i.touches.lastY=t.clientY},endMoveAnalysis:function(e){i.touches.moveing=!1}})}},pe=p("data-v-6506e238");i("data-v-6506e238");const ge={class:"interaction"},he={class:"interaction-header"},ye={key:0,class:"interaction-view"},ve={key:0,class:"loading-icon",src:"./assets/loading-icon.20717b30.svg",alt:""},be={class:"question"},_e={key:1,class:"question-text"},fe={class:"normal-text"},xe={key:1,class:"option-text"},we={class:"normal-text option-clamp"},Se={ref:"analysisRef",class:"transition-hotfix"},ke={class:"analysis"},Ae=d("p",{class:"analysis-title"},"本题解析",-1),Te={class:"analysis-audio is-play"},Me={class:"analysis-main"},Pe={key:0,class:"normal-text"},qe={class:"audio-instance"},je={class:"interaction-group"},Ce={class:"button-replay-disabled"};a();const Ee=pe(((e,t,s,i,a,n)=>{const p=x("follow-toast");return o(),l("div",ge,[d("header",he,[d("i",{class:"button-close",onClick:t[1]||(t[1]=(...e)=>i.closeView&&i.closeView(...e))})]),e.mainView?(o(),l("section",ye,[i.questionCurrent.loading?(o(),l("img",ve)):(o(),l("div",{key:1,class:{"upward-transition":!e.touches.moveing},style:{transform:`translateY(-${e.analysisHeight}px)`},onTouchstart:t[8]||(t[8]=(...e)=>i.startMoveAnalysis&&i.startMoveAnalysis(...e)),onTouchmove:t[9]||(t[9]=(...e)=>i.moveAnalysis&&i.moveAnalysis(...e)),onTouchend:t[10]||(t[10]=(...e)=>i.endMoveAnalysis&&i.endMoveAnalysis(...e))},[d("div",be,[i.questionsStem.image?(o(),l("img",{key:0,class:"fill-image",src:i.questionsStem.image},null,8,["src"])):(o(),l("div",_e,[d("p",fe,u(i.questionsStem.text),1)]))]),d("div",{class:["options-group",i.questionCurrent.horizontal?"is-horizontal":"is-vertical"]},[(o(!0),l(w,null,S(i.questionOptions,((t,s)=>(o(),l("div",{key:s,class:"option"},[d("div",{class:"option-view",onClick:e=>i.selectAnswer(t)},[t.image?(o(),l("img",{key:0,class:"fill-image",src:t.image},null,8,["src"])):(o(),l("div",xe,[d("p",we,u(t.text),1)]))],8,["onClick"]),d(m,{name:"fade"},{default:pe((()=>[r(d("div",{class:["option-border",t.answer?"is-right":"is-wrong"]},null,2),[[c,e.selectedAnswer===t]])])),_:2},1024)])))),128))],2),d("div",Se,[d("div",ke,[Ae,i.questionAnalysis.audio?(o(),l(w,{key:0},[r(d("i",{class:"analysis-audio",onClick:t[2]||(t[2]=e=>i.replayAudio("analysisAudio",i.analysisAudioRef))},null,512),[[c,e.isAudioEnd.analysisAudio]]),r(d("i",Te,null,512),[[c,!e.isAudioEnd.analysisAudio]])],64)):k("",!0),d("div",Me,[i.questionAnalysis.text?(o(),l("p",Pe,u(i.questionAnalysis.text),1)):k("",!0),i.questionAnalysis.image?(o(),l("img",{key:1,class:"analysis-image",src:i.questionAnalysis.image},null,8,["src"])):k("",!0)])])],512),d("div",qe,[i.questionsStem.audio?(o(),l("audio",{key:0,src:i.questionsStem.audio,onLoadedmetadata:t[3]||(t[3]=e=>i.loadedmetadata(i.stemAudioRef)),onEnded:t[4]||(t[4]=e=>i.playended("stemAudio")),onError:t[5]||(t[5]=e=>i.playerror("stemAudio")),ref:"stemAudioRef"},null,40,["src"])):k("",!0),i.questionAnalysis.audio?(o(),l("audio",{key:1,src:i.questionAnalysis.audio,onEnded:t[6]||(t[6]=e=>i.playended("analysisAudio")),onError:t[7]||(t[7]=e=>i.playerror("analysisAudio")),preload:"metadata",ref:"analysisAudioRef"},null,40,["src"])):k("",!0)])],38))])):k("",!0),d("footer",je,[i.questionsStem.audio&&!i.questionCurrent.loading?(o(),l(w,{key:0},[r(d("span",{class:"button-replay",onClick:t[11]||(t[11]=e=>i.replayAudio("stemAudio",i.stemAudioRef))},null,512),[[c,e.isAudioEnd.stemAudio]]),r(d("span",Ce,null,512),[[c,!e.isAudioEnd.stemAudio]])],64)):k("",!0),d("span",{class:e.selectedAnswer?e.questionIndex>=e.questionsAdapter.length-1?"button-continue":"button-next":"button-next-disabled",onClick:t[12]||(t[12]=(...e)=>i.nextQuestion&&i.nextQuestion(...e))},null,2)]),d(p,{toast:e.toast,"onUpdate:toast":t[13]||(t[13]=t=>e.toast=t)},null,8,["toast"])])}));me.render=Ee,me.__scopeId="data-v-6506e238";const Oe={props:{currentTime:Number},setup:(e,t)=>({closeView(){t.emit("close",e.currentTime)},resetPlay(){t.emit("reset",e.currentTime)},nextPlay(){t.emit("next",e.currentTime)}})},ze=p("data-v-c98b7364");i("data-v-c98b7364");const Be={class:"model-mask"},Ve={class:"popover-end"},Ge=d("p",{class:"end-text"},"恭喜你，本节课已学完",-1),Re={class:"end-button"},Le=d("p",{class:"button-text"},"重新学习",-1);a();const De=ze(((e,t,s,i,a,n)=>(o(),l("div",Be,[d("div",Ve,[Ge,d("div",Re,[d("div",{class:"right-button",onClick:t[1]||(t[1]=(...e)=>i.resetPlay&&i.resetPlay(...e))},[Le])]),d("div",{class:"popover-close",onClick:t[2]||(t[2]=(...e)=>i.closeView&&i.closeView(...e))})])]))));Oe.render=De,Oe.__scopeId="data-v-c98b7364";const Ie={components:{VideoDemo:F,Interaction:me,PopoverEnd:Oe},setup(e){const s=g({fullScreen:!1,inclusion:[{id:"120",sno:"000120",title:"",question_type:0,options_order:0,question_stem:[{stem_type:1,stem_content:"选出方框内节奏的正确组合方式"},{stem_type:3,stem_content:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22.mp3"}],question_analysis:[{analysis_type:1,analysis_content:"在6/8拍中，是以八分音符为一拍，每小节有六拍，强弱规律的是强弱弱，次强弱弱，我们在音值组合的时候，将整个小节分为两组音群，将第1第2第3拍组合在一起，将第4第5第6拍组合在一起，按照这种组合方式，所以选择第一个选项"},{analysis_type:3,analysis_content:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22.mp3"}],question_option:[{is_answer:!0,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK21-1.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK21-2.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK21-3.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK21-4.png"}]},{id:"758789287407988736",sno:"927765",title:"第一节四五第一节九十第二节四五第二节九十第三节四五",question_type:0,options_order:1,question_stem:[{stem_type:1,stem_content:"第一节四五六七八九十第二节四五六七八九十第三节四五六七八九十第四节四五六七八九十第五节四五六七八九十"},{stem_type:2,stem_content:"https://tests001.pnlyy.com/FbZ0e1kGNoylzTZ831bRA9P8aOIklL5dwaterMark.jpg"}],question_analysis:[{analysis_type:1,analysis_content:"产生"}],question_option:[{is_answer:!0,option_img:"",option_text:"大提琴大提琴"},{is_answer:!1,option_img:"",option_text:"大提琴a大提琴a333产生大提琴大提琴大提琴"},{is_answer:!1,option_img:"",option_text:"333"},{is_answer:!1,option_img:"",option_text:"444asdasd"}]},{id:"121",sno:"000121",title:"",classification_id:"0",classification_pid:null,first_class:null,second_class:null,is_active:!0,question_type:0,options_order:0,question_stem:[{stem_type:1,stem_content:"从耳机图标处听音乐，选出方框内旋律片段的正确力度术语"},{stem_type:2,stem_content:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22.png"},{stem_type:3,stem_content:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22.mp3"}],question_analysis:[{analysis_type:1,analysis_content:"从音频中可以听出红框中的旋律是渐强，所以选crescendo"}],question_option:[{is_answer:!0,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22-1.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22-2.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22-3.png"},{is_answer:!1,option_img:"https://tests001.pnlyy.com/mb/vXkbG9bt6VxLvQi0cAMPxmKR6JyhKDcK22-4.png"}]}],timeline:[10,110],resolveCallback:()=>{},rejectCallback:()=>{}});return t(t({},_(s)),{closeVideo:()=>{s.fullScreen=!1},resetVideo:()=>{s.fullScreen=!1,f((()=>{s.fullScreen=!0}))},viewQuestions:(e,t,i)=>{s.resolveCallback=t,s.rejectCallback=i}})}};Ie.render=function(e,t,s,i,a,n){const r=x("interaction"),c=x("popover-end"),u=x("video-demo");return o(),l(u,{fullScreen:e.fullScreen,"onUpdate:fullScreen":t[3]||(t[3]=t=>e.fullScreen=t),title:"第一节四五第一节九十第二节四五第二节九十第三节四五",sources:"http://test001.pnlyy.com/mb/0orrjpxjfTvIibv3M7bnjH9h2bfeZUtJL1.mp4",thumb:"http://test001.pnlyy.com/FbZ0e1kGNoylzTZ831bRA9P8aOIklL5dwaterMark.jpg",timeline:e.timeline,onProgress:i.viewQuestions},{mask:T((({portrait:t})=>[d(r,{portrait:t,questions:e.inclusion,onComplete:e.resolveCallback,onAbort:e.rejectCallback},null,8,["portrait","questions","onComplete","onAbort"])])),end:T((()=>[d(c,{onClose:t[1]||(t[1]=e=>i.closeVideo()),onReset:t[2]||(t[2]=e=>i.resetVideo())})])),_:1},8,["fullScreen","timeline","onProgress"])};var Ye=[{path:"/helloVideo/home",name:"HelloVideoHome",component:Ie,meta:{title:"web伪横屏视频播放组件"}}],He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ye});const Xe={setup(e){let s=y(!1),i=y("");const a=M(),n=P();return{stageVisible:s,switchStage:e=>{s.value=e},toStage:e=>{i.value||(i.value=e,setTimeout((()=>{a.push({path:"/musicParty/party",query:t(t({},n.query),{theme:e})})}),400))},getStyle:e=>{const t=i.value===e;return{activated:t,deactivated:""!==i.value&&!t}}}}},Ke=p("data-v-1350050e");i("data-v-1350050e");const Qe={class:"page-wrap"},Ue=d("span",{class:"sound-tips"},null,-1),Fe=d("img",{class:"select-party",src:"./assets/pic_choose@2x.313071d7.png"},null,-1),We=d("p",{class:"preload"},null,-1);a();const Ne=Ke(((e,t,s,i,a,n)=>(o(),l("div",Qe,[d("span",{class:"button-start",onClick:t[1]||(t[1]=e=>i.switchStage(!0))}),Ue,d(m,{name:"fade"},{default:Ke((()=>[i.stageVisible?(o(),l("div",{key:0,class:"to-bg",onClick:t[5]||(t[5]=q((e=>i.switchStage(!1)),["self"]))},[Fe,d("div",{class:"container",onClick:t[4]||(t[4]=q((e=>i.switchStage(!1)),["self"]))},[d("i",{class:["to-stage left",i.getStyle("christmas")],onClick:t[2]||(t[2]=e=>i.toStage("christmas"))},null,2),d("i",{class:["to-stage right",i.getStyle("newyear")],onClick:t[3]||(t[3]=e=>i.toStage("newyear"))},null,2)])])):k("",!0)])),_:1}),We]))));Xe.render=Ne,Xe.__scopeId="data-v-1350050e";const Ze={},Je=p("data-v-16dddd9e");i("data-v-16dddd9e");const $e={class:"party-wrap"},et={class:"party-main"},tt={class:"party-over"},st={class:"stage"},it={class:"bottom"};a();const at=Je(((e,t,s,i,a,n)=>(o(),l("div",$e,[d("div",et,[d("div",tt,[d("div",st,[A(e.$slots,"stage")]),d("div",it,[A(e.$slots,"bottom")])])]),A(e.$slots,"default")]))));Ze.render=at,Ze.__scopeId="data-v-16dddd9e";const nt={props:{visible:Boolean,theme:String},emits:["update:visible","share"],setup:(e,t)=>({shareTo:()=>{j({message:"分享需要公众号，所以没办法用。分享后的助力页面正在改造中...."})},linkTo:e=>{j({message:"功能改造中...."})}})},ot=p("data-v-73804ec6");i("data-v-73804ec6");const lt={class:"popup-content"};a();const rt=ot(((e,t,s,i,a,n)=>(o(),l(m,{name:"fade"},{default:ot((()=>[r(d("div",{class:["container",s.theme]},[d("div",lt,[d("button",{class:"button share",onClick:t[1]||(t[1]=e=>i.shareTo())}),d("button",{class:"button lottery",onClick:t[2]||(t[2]=e=>i.linkTo("/musicParty/lottery"))})])],2),[[c,s.visible]])])),_:1}))));nt.render=rt,nt.__scopeId="data-v-73804ec6";const ct={props:{visible:Boolean,placement:{type:String,default:"right"},width:String,height:String},emits:["close","open"],setup:(e,t)=>(b((()=>e.visible),((e,s)=>{e&&f().then((()=>{t.emit("open",null)}))}),{immediate:!0}),{closeView:()=>{t.emit("close",null)},width2:e.width,height:e.height})},dt=p("data-v-c65897aa");i("data-v-c65897aa");const ut={class:"popup-bg"};a();const mt=dt(((e,t,s,i,a,n)=>(o(),l(m,{name:"fade"},{default:dt((()=>[r(d("div",ut,[d("div",{class:"popup-content",style:{width:s.width,height:i.height}},[A(e.$slots,"default"),d("i",{class:["button-close",s.placement],onClick:t[1]||(t[1]=e=>i.closeView())},null,2)],4)],512),[[c,s.visible]])])),_:3}))));ct.render=mt,ct.__scopeId="data-v-c65897aa";const pt={components:{PopupView:ct},props:{visible:Boolean},emits:["update:visible","apply","cancel"],setup(e,t){const s=()=>{t.emit("update:visible",!1)};return{notify:e=>{t.emit(e,null),s()},closeView:s}}},gt=p("data-v-6bc1d4d4");i("data-v-6bc1d4d4");const ht={class:"container"},yt=d("p",{class:"title"},"您尚未添加伴奏，确认要合成吗？",-1),vt=d("div",{class:"icon-aha"},null,-1),bt={class:"buttons"};a();const _t=gt(((e,t,s,i,a,n)=>{const r=x("popup-view");return o(),l(r,{visible:s.visible,onClose:i.closeView},{default:gt((()=>[d("div",ht,[yt,vt,d("div",bt,[d("span",{class:"apply",onClick:t[1]||(t[1]=e=>i.notify("apply"))},"确认"),d("span",{class:"cancel",onClick:t[2]||(t[2]=e=>i.notify("cancel"))},"不，去添加")])])])),_:1},8,["visible","onClose"])}));pt.render=_t,pt.__scopeId="data-v-6bc1d4d4";var ft={first:["diangangqin","xiaotiqin","jita","dianjita","beisi"],second:["jueshigu","hechengqi","xueqiaoling","dianzigu","xiaohao"],learnFirst:["diangangqin"]},xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/beisi.7d160864.mp3"}),wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/diangangqin.ffecef5a.mp3"}),St=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianjita.400edad8.mp3"}),kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianzigu.8837d299.mp3"}),At=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/hechengqi.5fb46003.mp3"}),Tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jita.9b998f77.mp3"}),Mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jueshigu.66c82f91.mp3"}),Pt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/vocal.57120e19.mp3"}),qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaohao.5b9f0de8.mp3"}),jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaotiqin.6fc40601.mp3"}),Ct=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xueqiaoling.80b04bd2.mp3"}),Et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/beisi.bfa6da50.mp3"}),Ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/diangangqin.9acb5f4d.mp3"}),zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianjita.373f0069.mp3"}),Bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianzigu.d99065d1.mp3"}),Vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/hechengqi.3bf2cbec.mp3"}),Gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jita.c04ac337.mp3"}),Rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jueshigu.214eecd9.mp3"}),Lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/vocal.e5e34d31.mp3"}),Dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaohao.c9d6702a.mp3"}),It=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaotiqin.07e72b77.mp3"}),Yt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xueqiaoling.7ba69e00.mp3"}),Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/aha_christmas.28331b5f.png"}),Xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/aha_newyear.0f2987ca.png"}),Kt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/beisi.c14c4edd.png"}),Qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/boy_christmas.5b0b1869.png"}),Ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/boy_newyear.ba97fb6d.png"}),Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/diangangqin.58df54d0.png"}),Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianjita.d8289995.png"}),Nt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/dianzigu.73a0c1b2.png"}),Zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/hechengqi.86efa234.png"}),Jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jita.a72a06ef.png"}),$t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/jueshigu.6e633fbd.png"}),es=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/run_christmas.8cdc942e.png"}),ts=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/run_newyear.e0f42db4.png"}),ss=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaohao.90bc67dd.png"}),is=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xiaotiqin.ca292018.png"}),as=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/xueqiaoling.8458972e.png"}),ns=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_christmas@2x.f97c0cd1.png"}),os=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_newyear@2x.359e1575.png"});const ls={"../../../assets/images/musicParty2020/stage/ins_beisi@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_beisi@2x.42d0ddf8.png"}),"../../../assets/images/musicParty2020/stage/ins_diangangqin@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_diangangqin@2x.0546a99a.png"}),"../../../assets/images/musicParty2020/stage/ins_dianjita@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_dianjita@2x.bce49cf6.png"}),"../../../assets/images/musicParty2020/stage/ins_dianzigu@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_dianzigu@2x.07b1f3ad.png"}),"../../../assets/images/musicParty2020/stage/ins_hechengqi@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_hechengqi@2x.cac82fb1.png"}),"../../../assets/images/musicParty2020/stage/ins_jita@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_jita@2x.fa766f5a.png"}),"../../../assets/images/musicParty2020/stage/ins_jueshigu@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_jueshigu@2x.03c9af49.png"}),"../../../assets/images/musicParty2020/stage/ins_xiaohao@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_xiaohao@2x.69eab518.png"}),"../../../assets/images/musicParty2020/stage/ins_xiaotiqin@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_xiaotiqin@2x.cee6c627.png"}),"../../../assets/images/musicParty2020/stage/ins_xueqiaoling@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ins_xueqiaoling@2x.c3e0554b.png"})},rs={"../../../assets/images/musicParty2020/stage/bg_christmas@2x.png":ns,"../../../assets/images/musicParty2020/stage/bg_newyear@2x.png":os},cs={"../../../assets/images/musicParty2020/sprites/aha_christmas.png":Ht,"../../../assets/images/musicParty2020/sprites/aha_newyear.png":Xt,"../../../assets/images/musicParty2020/sprites/beisi.png":Kt,"../../../assets/images/musicParty2020/sprites/boy_christmas.png":Qt,"../../../assets/images/musicParty2020/sprites/boy_newyear.png":Ut,"../../../assets/images/musicParty2020/sprites/diangangqin.png":Ft,"../../../assets/images/musicParty2020/sprites/dianjita.png":Wt,"../../../assets/images/musicParty2020/sprites/dianzigu.png":Nt,"../../../assets/images/musicParty2020/sprites/hechengqi.png":Zt,"../../../assets/images/musicParty2020/sprites/jita.png":Jt,"../../../assets/images/musicParty2020/sprites/jueshigu.png":$t,"../../../assets/images/musicParty2020/sprites/run_christmas.png":es,"../../../assets/images/musicParty2020/sprites/run_newyear.png":ts,"../../../assets/images/musicParty2020/sprites/xiaohao.png":ss,"../../../assets/images/musicParty2020/sprites/xiaotiqin.png":is,"../../../assets/images/musicParty2020/sprites/xueqiaoling.png":as},ds={"../../../assets/sounds/musicParty2020/christmas/beisi.mp3":Et,"../../../assets/sounds/musicParty2020/christmas/diangangqin.mp3":Ot,"../../../assets/sounds/musicParty2020/christmas/dianjita.mp3":zt,"../../../assets/sounds/musicParty2020/christmas/dianzigu.mp3":Bt,"../../../assets/sounds/musicParty2020/christmas/hechengqi.mp3":Vt,"../../../assets/sounds/musicParty2020/christmas/jita.mp3":Gt,"../../../assets/sounds/musicParty2020/christmas/jueshigu.mp3":Rt,"../../../assets/sounds/musicParty2020/christmas/vocal.mp3":Lt,"../../../assets/sounds/musicParty2020/christmas/xiaohao.mp3":Dt,"../../../assets/sounds/musicParty2020/christmas/xiaotiqin.mp3":It,"../../../assets/sounds/musicParty2020/christmas/xueqiaoling.mp3":Yt},us={"../../../assets/sounds/musicParty2020/newyear/beisi.mp3":xt,"../../../assets/sounds/musicParty2020/newyear/diangangqin.mp3":wt,"../../../assets/sounds/musicParty2020/newyear/dianjita.mp3":St,"../../../assets/sounds/musicParty2020/newyear/dianzigu.mp3":kt,"../../../assets/sounds/musicParty2020/newyear/hechengqi.mp3":At,"../../../assets/sounds/musicParty2020/newyear/jita.mp3":Tt,"../../../assets/sounds/musicParty2020/newyear/jueshigu.mp3":Mt,"../../../assets/sounds/musicParty2020/newyear/vocal.mp3":Pt,"../../../assets/sounds/musicParty2020/newyear/xiaohao.mp3":qt,"../../../assets/sounds/musicParty2020/newyear/xiaotiqin.mp3":jt,"../../../assets/sounds/musicParty2020/newyear/xueqiaoling.mp3":Ct},ms=(e,t)=>{const s=Object.keys(e).find((e=>~e.indexOf(t)));return s?e[s].default:""},ps=[{id:"diangangqin",src:ms(ls,"ins_diangangqin@2x.png")},{id:"xiaotiqin",src:ms(ls,"ins_xiaotiqin@2x.png")},{id:"jita",src:ms(ls,"ins_jita@2x.png")},{id:"dianjita",src:ms(ls,"ins_dianjita@2x.png")},{id:"beisi",src:ms(ls,"ins_beisi@2x.png")},{id:"jueshigu",src:ms(ls,"ins_beisi@2x.png")},{id:"hechengqi",src:ms(ls,"ins_hechengqi@2x.png")},{id:"xueqiaoling",src:ms(ls,"ins_xueqiaoling@2x.png")},{id:"dianzigu",src:ms(ls,"ins_dianzigu@2x.png")},{id:"xiaohao",src:ms(ls,"ins_xiaohao@2x.png")},{id:"sprites_xiaohao",src:ms(cs,"xiaohao.png")},{id:"sprites_beisi",src:ms(cs,"beisi.png")},{id:"sprites_xiaotiqin",src:ms(cs,"xiaotiqin.png")},{id:"sprites_xueqiaoling",src:ms(cs,"xueqiaoling.png")},{id:"sprites_diangangqin",src:ms(cs,"diangangqin.png")},{id:"sprites_dianzigu",src:ms(cs,"dianzigu.png")},{id:"sprites_dianjita",src:ms(cs,"dianjita.png")},{id:"sprites_xiaohao",src:ms(cs,"xiaohao.png")},{id:"sprites_jita",src:ms(cs,"jita.png")},{id:"sprites_jueshigu",src:ms(cs,"jueshigu.png")},{id:"sprites_hechengqi",src:ms(cs,"hechengqi.png")},{id:"aha_christmas",src:ms(cs,"aha_christmas.png")},{id:"aha_newyear",src:ms(cs,"aha_newyear.png")},{id:"run_christmas",src:ms(cs,"run_christmas.png")},{id:"run_newyear",src:ms(cs,"run_newyear.png")},{id:"bg_newyear",src:ms(rs,"bg_newyear@2x.png")},{id:"bg_christmas",src:ms(rs,"bg_christmas@2x.png")}],gs={christmas:[{id:"song_christmas_beisi",alias:"beisi",src:ms(ds,"beisi.mp3")},{id:"song_christmas_diangangqin",alias:"diangangqin",src:ms(ds,"diangangqin.mp3")},{id:"song_christmas_dianjita",alias:"dianjita",src:ms(ds,"dianjita.mp3")},{id:"song_christmas_dianzigu",alias:"dianzigu",src:ms(ds,"dianzigu.mp3")},{id:"song_christmas_hechengqi",alias:"hechengqi",src:ms(ds,"hechengqi.mp3")},{id:"song_christmas_jita",alias:"jita",src:ms(ds,"jita.mp3")},{id:"song_christmas_jueshigu",alias:"jueshigu",src:ms(ds,"jueshigu.mp3")},{id:"song_christmas_vocal",alias:"vocal",src:ms(ds,"vocal.mp3")},{id:"song_christmas_xiaohao",alias:"xiaohao",src:ms(ds,"xiaohao.mp3")},{id:"song_christmas_xiaotiqin",alias:"xiaotiqin",src:ms(ds,"xiaotiqin.mp3")},{id:"song_christmas_xueqiaoling",alias:"xueqiaoling",src:ms(ds,"xueqiaoling.mp3")}],newyear:[{id:"song_newyear_beisi",alias:"beisi",src:ms(us,"xueqiaoling.mp3")},{id:"song_newyear_diangangqin",alias:"diangangqin",src:ms(us,"diangangqin.mp3")},{id:"song_newyear_dianjita",alias:"dianjita",src:ms(us,"dianjita.mp3")},{id:"song_newyear_dianzigu",alias:"dianzigu",src:ms(us,"dianzigu.mp3")},{id:"song_newyear_hechengqi",alias:"hechengqi",src:ms(us,"hechengqi.mp3")},{id:"song_newyear_jita",alias:"jita",src:ms(us,"jita.mp3")},{id:"song_newyear_jueshigu",alias:"jueshigu",src:ms(us,"jueshigu.mp3")},{id:"song_newyear_vocal",alias:"vocal",src:ms(us,"vocal.mp3")},{id:"song_newyear_xiaohao",alias:"xiaohao",src:ms(us,"xiaohao.mp3")},{id:"song_newyear_xiaotiqin",alias:"xiaotiqin",src:ms(us,"xiaotiqin.mp3")},{id:"song_newyear_xueqiaoling",alias:"xueqiaoling",src:ms(us,"xueqiaoling.mp3")}]},hs={},ys={get:e=>hs[e],addImages:e=>new Promise(((t,s)=>{const i=e.length;let a=0,n=0;0===i&&t();const o=()=>{a+n>=i&&(0===n?t():s())};e.forEach((e=>{if(hs[e.id])a++,o();else{const t=new Image;t.src=e.src,t.onload=()=>{hs[e.id]=t,a++,o()},t.onerror=()=>{n++,o()}}}))})),addSounds:e=>new Promise(((t,s)=>{const i=e.length;let a=0,n=0;const o=()=>{a+n>=i&&(0===n?t():s())};e.forEach((e=>{if(hs[e.id])a++,o();else{const t=new C.Howl({src:[e.src],preload:!0,loop:!0,autoplay:!1,onload(){a++,o()},onloaderror(){n++,o()}});hs[e.id]=t}}))})),addTicker:e=>new Promise((t=>{setTimeout((()=>t()),e)}))};const vs={props:{label:String,exclude:{type:Array,default:()=>[]}},emits:["movestart","moveing","moveend"],setup(e,t){const s=h((()=>ft[e.label]||[])),i=g(s.value.map((()=>({x:0,y:0,startX:0,startY:0,isMove:!1})))),a=h((()=>s.value.map((e=>{const t=ps.find((t=>t.id===e));return{name:e,src:t?t.src:""}}))));return{imagesList:a,transformStyle:e=>{if(e>=i.length)return null;const t=i[e];return`transform: translate(${t.x}px, ${t.y}px); ${t.isMove?"transition-duration: 0s; z-index: 5":""}`},touchStart:(e,s)=>{const n=i[e],o=s.targetTouches[0];n.startX=o.clientX,n.startY=o.clientY,n.isMove=!0,t.emit("movestart",a.value[e].name,o.clientX,o.clientY)},touchMove:(e,s)=>{s.preventDefault();const n=i[e],o=s.targetTouches[0];n.x=o.clientX-n.startX,n.y=o.clientY-n.startY,t.emit("moveing",a.value[e].name,o.clientX,o.clientY)},touchEnd:(e,s)=>{const n=i[e];n.isMove=!1,n.x=0,n.y=0,t.emit("moveend",a.value[e].name)}}}},bs=p("data-v-35169d92");i("data-v-35169d92");const _s=d("img",{class:"ins-cover",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAABeAgMAAAA7yS7rAAAACVBMVEUAAADCch/8smh9bw39AAAAAXRSTlMAQObYZgAAAB5JREFUKM9jEA2FAIdR1ohhaa2CgAbqsAaBj0YECwB5CQ8AsZsPlQAAAABJRU5ErkJggg=="},null,-1);a();const fs=bs(((e,t,s,i,a,n)=>(o(),l("ul",{class:["ins-list",s.label]},[(o(!0),l(w,null,S(i.imagesList,((e,t)=>(o(),l("li",{class:"ins-item",key:e.name},[d("img",{class:"ins-gray",src:e.src},null,8,["src"]),r(d("img",{src:e.src,onTouchstart:e=>i.touchStart(t,e),onTouchmove:e=>i.touchMove(t,e),onTouchend:e=>i.touchEnd(t,e),style:i.transformStyle(t),class:"ins-move"},null,44,["src","onTouchstart","onTouchmove","onTouchend"]),[[c,!s.exclude.some((t=>t===e.name))]]),_s])))),128))],2))));vs.render=fs,vs.__scopeId="data-v-35169d92";const xs={props:{index:Number,hit:Boolean,skin:String,visible:{type:Boolean,default:!0}},emits:["slideDown"],setup(e,t){const s=y(0),i=y(0);return{touchStart:t=>{if(!e.skin)return;const a=t.targetTouches[0];s.value=a.clientX,i.value=a.clientY},touchMove:a=>{if(!e.skin)return;const n=a.targetTouches[0];n.clientX-s.value<=20&&n.clientY-i.value>=30&&t.emit("slideDown")}}}},ws=p("data-v-df23de92")(((e,t,s,i,a,n)=>r((o(),l("div",{class:["boy",`boy-${s.index}`]},[d("div",{class:["animation",s.hit?"is-hit":null,s.skin?s.skin:"empty"]},null,2),d("div",{onTouchstart:t[1]||(t[1]=(...e)=>i.touchStart&&i.touchStart(...e)),onTouchmove:t[2]||(t[2]=(...e)=>i.touchMove&&i.touchMove(...e))},[A(e.$slots,"default")],32)],2)),[[c,s.visible]])));function Ss(e,t,s){const i=e.getBoundingClientRect();return t>=i.left&&t<=i.left+i.width&&s>=i.top&&s<=i.top+i.height}xs.render=ws,xs.__scopeId="data-v-df23de92";var ks="./assets/effect_hand@2x.f48267c3.png";const As={components:{LayoutParty:Ze,PartyIns:vs,PartyBoy:xs},props:{visible:Boolean,theme:String},emits:["step"],setup(e,s){const i=g({stepCurrent:0,learnBoy:{index:4,isHit:!1,skin:""},learnAha:{isSong:!1}}),a=()=>{s.emit("step",i.stepCurrent,t({},i.learnBoy),t({},i.learnAha))},n=()=>{0===i.stepCurrent?a():1===i.stepCurrent?(i.learnBoy.skin="diangangqin",a()):2===i.stepCurrent?(i.learnBoy.skin="",a()):3===i.stepCurrent&&(i.learnAha.isSong=!0,a()),i.stepCurrent=Math.min(i.stepCurrent+1,3)},o=y(null);return b((()=>e.visible),(e=>{e&&(i.stepCurrent=0,i.learnBoy.skin="",i.learnAha.isSong=!1,n())}),{immediate:!0}),t(t({RefsHits:o},_(i)),{removeSkin:()=>{2===i.stepCurrent&&n()},itemMoving:(e,t,s)=>{i.learnBoy.isHit=Ss(o.value,t,s)},itemMoveEnd:e=>{i.learnBoy.isHit&&1===i.stepCurrent&&n(),i.learnBoy.isHit=!1},skipLearn:()=>{i.stepCurrent=3,n()},nextStep:n})}},Ts=p("data-v-588a0031");i("data-v-588a0031");const Ms={key:0,class:"beginner"},Ps={class:"learn-help"},qs={class:"title"},js=d("p",null,"将下方的乐器池中的音乐",-1),Cs=d("p",null,"拖动给舞台中的演奏者",-1),Es=d("p",null,"可以添加伴奏",-1),Os=d("p",null,"将舞台上演奏家的乐器拖",-1),zs=d("p",null,"入乐器池，可以取消伴奏",-1),Bs=d("p",null,"反复点击主唱",-1),Vs=d("p",null,"可以控制它唱歌",-1),Gs=d("img",{class:"aha",src:"./assets/pic_new_aha@2x.5e463ebc.png",alt:""},null,-1),Rs={key:1,class:"hand-first",src:ks},Ls={key:2,class:"hand-second",src:ks},Ds={key:3,class:"hand-three",src:ks};a();const Is=Ts(((e,t,s,i,a,n)=>{const r=x("party-boy"),c=x("party-ins"),m=x("layout-party");return s.visible?(o(),l("div",Ms,[d(m,null,{stage:Ts((()=>[e.stepCurrent<=2?(o(),l(r,{key:0,onSlideDown:t[2]||(t[2]=e=>i.removeSkin()),index:e.learnBoy.index,hit:e.learnBoy.isHit,skin:e.learnBoy.skin},{default:Ts((()=>[d("div",{ref:"RefsHits",onClick:t[1]||(t[1]=e=>i.removeSkin()),class:"hit-box"},null,512)])),_:1},8,["index","hit","skin"])):3===e.stepCurrent?(o(),l(r,{key:1,index:0,skin:`aha_${s.theme}`},{default:Ts((()=>[d("div",{ref:"RefsHits",onClick:t[3]||(t[3]=e=>i.nextStep()),class:"hit-box"},null,512)])),_:1},8,["skin"])):k("",!0),d("div",Ps,[d("p",qs,"新手引导 "+u(e.stepCurrent)+"/3",1),1===e.stepCurrent?(o(),l(w,{key:0},[js,Cs,Es],64)):2===e.stepCurrent?(o(),l(w,{key:1},[Os,zs],64)):3===e.stepCurrent?(o(),l(w,{key:2},[Bs,Vs],64)):k("",!0),Gs])])),bottom:Ts((()=>[d("i",{class:"button-next",onClick:t[4]||(t[4]=e=>i.nextStep())},u(3===e.stepCurrent?"开始创作":"下一步"),1),1===e.stepCurrent?(o(),l(c,{key:0,class:"ins-first",label:"learnFirst",onMoveing:i.itemMoving,onMoveend:i.itemMoveEnd},null,8,["onMoveing","onMoveend"])):k("",!0),1===e.stepCurrent?(o(),l("img",Rs)):2===e.stepCurrent?(o(),l("img",Ls)):3===e.stepCurrent?(o(),l("img",Ds)):k("",!0)])),default:Ts((()=>[d("img",{class:"button-skip",src:"./assets/skip@2x.afceff2b.png",onClick:t[5]||(t[5]=e=>i.skipLearn())})])),_:1})])):k("",!0)}));As.render=Is,As.__scopeId="data-v-588a0031";const Ys={props:{theme:String,visible:Boolean},emits:["update:visible","completed","error"],setup(e,t){const s=y(""),i=y(""),a=y(!1),n=y(!0),o=()=>{n.value=!1,t.emit("update:visible",!1),t.emit("completed",i.value)},l=()=>{a.value=!1,(()=>{let e=!1;const s=setTimeout((()=>{e=!0,o()}),15e3);Promise.all([ys.addSounds(gs[i.value]),ys.addImages(ps),ys.addTicker(1280)]).then((()=>{e||(clearTimeout(s),o())})).catch((()=>{clearTimeout(s),a.value=!0,t.emit("error",null)}))})()};return b((()=>e.visible),(t=>{t&&(s.value=e.theme,i.value="christmas"===e.theme?"newyear":"christmas",l())}),{immediate:!0}),{fromTheme:s,toTheme:i,networkError:a,firstView:n,resetLoading:l}}},Hs=p("data-v-1843ef95");i("data-v-1843ef95");const Xs={key:0},Ks=d("div",{class:"aha-error"},null,-1),Qs=d("p",{class:"text"},"啊哦，网络好像不给力…",-1),Us={key:1},Fs=d("div",{class:"sprites"},[d("div",{class:"animation"})],-1),Ws={class:"text"};a();const Ns=Hs(((e,t,s,i,a,n)=>(o(),l(m,{name:i.fromTheme},{default:Hs((()=>[r(d("div",{class:["load-wrap",i.fromTheme,i.firstView?"close-transform":null]},[i.networkError?(o(),l("div",Xs,[Ks,Qs,d("button",{class:"button-reset",onClick:t[1]||(t[1]=e=>i.resetLoading())},"重试")])):(o(),l("div",Us,[Fs,d("p",Ws," 正在赶赴"+u("christmas"===i.fromTheme?"新年的欢乐广场":"圣诞老人的小屋")+"... ",1)]))],2),[[c,s.visible]])])),_:1},8,["name"]))));Ys.render=Ns,Ys.__scopeId="data-v-1843ef95";let Zs={},Js=[];var $s={refresh(e){gs[e].forEach((e=>{Zs[e.alias]=ys.get(e.id)}))},cache(e){Js=e},clear(){Js=[],Zs={}},stop(e=null){e?Zs[e].stop():Object.keys(Zs).forEach((e=>{const t=Zs[e];t.playing()&&t.stop()}))},replay(e=!1){this.stop(),requestAnimationFrame((()=>{Js.forEach((e=>{e.skin&&Zs[e.skin].play()})),e&&Zs.vocal.play()}))}};const ei={components:{LayoutParty:Ze,ActionGreat:nt,PopupAsk:pt,PartyIns:vs,PartyBoy:xs,LearnGame:As,StageLoading:Ys},setup(e){const t=P(),s=y("newyear"===t.query.theme?"christmas":"newyear"),i=g([1,2,3,4,5].map((e=>({index:e,isHit:!1,skin:"",visible:!0})))),a=h((()=>i.filter((e=>e.skin)).map((e=>e.skin)))),n=y(!1),o=y(0),l=g({ask:!1,rule:!1,load:!1,learn:!1,great:!1,share:!1}),r=[i.map((()=>null))],c=(e=!1)=>{e?($s.stop(),o.value=1,setTimeout((()=>{o.value=2,l.great=!0,$s.replay(n.value)}),1500)):0===a.value.length?l.ask=!0:c(!0)};return E((()=>{$s.stop(),$s.clear()})),l.load=!0,l.learn=!0,{theme:s,boysList:i,boysSkin:a,leadSinger:n,composeStatus:o,visibles:l,restartGame:()=>{n.value=!0,i.forEach((e=>{e.skin=""})),$s.replay(n.value),o.value=0,l.great=!1},RefHits:r,itemMoving:(e,t,s)=>{0===o.value&&r.forEach(((e,a)=>{i[a].isHit=Ss(e,t,s)}))},itemMoveEnd:e=>{0===o.value&&(i.forEach(((t,s)=>{t.isHit&&(t.skin=e),t.isHit=!1})),$s.replay(n.value))},changeSong:()=>{0===o.value&&(n.value=!n.value,n.value?$s.replay(!0):$s.stop("vocal"))},removeSkin:e=>{if(0!==o.value)return;const t=i[e];$s.stop(t.skin),t.skin=""},changeTheme:()=>{l.load=!0,$s.stop()},changeThemeEnd:e=>{s.value=e,$s.refresh(e),$s.cache(i),$s.replay(n.value),document.title="christmas"===e?"圣诞老人的小屋":"新年的欢乐广场"},nextLearn:(e,t,s)=>{const a=i.find((e=>e.index===t.index));a&&(0===e?(a.skin&&$s.stop(a.skin),a.visible=!1):1===e?(a.skin=t.skin,$s.replay(n.value)):2===e?(a.skin=t.skin,$s.stop(t.skin),a.visible=!0):e>=3&&(l.learn=!1,a.visible=!0,n.value=s.isSong,$s.replay(s.isSong)))},composeMusic:c,linkToLottery:()=>{console.log("linkToLottery")},shareView:()=>{l.share=!0}}},beforeRouteEnter(e,t,s){"/"==t.path?s({path:"/musicParty/home",query:e.query}):s()}},ti=p("data-v-cfc2c31e");i("data-v-cfc2c31e");const si={class:"party-bottom"},ii={class:"compose"},ai={key:0,class:"button-music disbled"},ni={key:1,class:"button-music music"};a();const oi=ti(((e,t,s,i,a,n)=>{const r=x("party-boy"),c=x("party-ins"),u=x("action-great"),m=x("popup-ask"),p=x("learn-game"),g=x("stage-loading"),h=x("layout-party");return o(),l(h,{class:["page-wrap",i.theme]},{stage:ti((()=>[d("div",{class:["party-stage",{"animation-stop":1===i.composeStatus}]},[(o(!0),l(w,null,S(i.boysList,((e,t)=>(o(),l(r,{onSlideDown:e=>i.removeSkin(t),visible:e.visible,index:e.index,hit:e.isHit,skin:e.skin,key:e.index},{default:ti((()=>[d("div",{ref:e=>i.RefHits[t]=e,onClick:e=>i.removeSkin(t),class:"hit-box"},null,8,["onClick"])])),_:2},1032,["onSlideDown","visible","index","hit","skin"])))),128)),d(r,{index:0,skin:i.leadSinger?`run_${i.theme}`:`aha_${i.theme}`},{default:ti((()=>[d("div",{class:"hit-box",onClick:t[1]||(t[1]=e=>i.changeSong())})])),_:1},8,["skin"])],2)])),bottom:ti((()=>[d("div",si,[d("div",ii,[d("div",{"vvvvv-if":"userRecord",class:"button-lottery",onClick:t[2]||(t[2]=e=>i.linkToLottery())}),1===i.composeStatus?(o(),l("div",ai)):2===i.composeStatus?(o(),l("div",ni,[d("i",{class:"button-reset",onClick:t[3]||(t[3]=e=>i.restartGame())})])):(o(),l("div",{key:2,class:"button-music",onClick:t[4]||(t[4]=e=>i.composeMusic(!1))})),0===i.composeStatus?(o(),l("div",{key:3,class:"button-tostage",onClick:t[5]||(t[5]=e=>i.changeTheme())})):k("",!0)]),d(c,{class:"ins-first",label:"first",exclude:i.boysSkin,onMoveing:i.itemMoving,onMoveend:i.itemMoveEnd},null,8,["exclude","onMoveing","onMoveend"]),d(c,{class:"ins-second",label:"second",exclude:i.boysSkin,onMoveing:i.itemMoving,onMoveend:i.itemMoveEnd},null,8,["exclude","onMoveing","onMoveend"])]),d(u,{visible:i.visibles.great,"onUpdate:visible":t[6]||(t[6]=e=>i.visibles.great=e),theme:i.theme,onShare:t[7]||(t[7]=e=>i.shareView())},null,8,["visible","theme"])])),default:ti((()=>[0===i.composeStatus?(o(),l("button",{key:0,class:"button-help",onClick:t[8]||(t[8]=e=>i.visibles.learn=!0)})):k("",!0),d(m,{visible:i.visibles.ask,"onUpdate:visible":t[9]||(t[9]=e=>i.visibles.ask=e),onApply:t[10]||(t[10]=e=>i.composeMusic(!0))},null,8,["visible"]),d(p,{visible:i.visibles.learn,"onUpdate:visible":t[11]||(t[11]=e=>i.visibles.learn=e),theme:i.theme,onStep:i.nextLearn},null,8,["visible","theme","onStep"]),d(g,{theme:i.theme,visible:i.visibles.load,"onUpdate:visible":t[12]||(t[12]=e=>i.visibles.load=e),onCompleted:i.changeThemeEnd},null,8,["theme","visible","onCompleted"])])),_:1},8,["class"])}));ei.render=oi,ei.__scopeId="data-v-cfc2c31e";var li=[{path:"/musicparty/home",name:"MusicPartyHome",component:Xe,meta:{title:"双旦音乐派对",root:50}},{path:"/musicparty/party",name:"MusicPartyParty",component:ei,meta:{title:"双旦音乐派对",root:50}}],ri=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:li});const ci={"../../../assets/images/thanksGive/games/bg_footer@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_footer@2x.2ad35d0a.png"}),"../../../assets/images/thanksGive/games/bg_header@2x.jpg":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_header@2x.5f23db4c.jpg"}),"../../../assets/images/thanksGive/games/bg_main2@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_main2@2x.33bb6ad5.png"}),"../../../assets/images/thanksGive/games/bg_main@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_main@2x.63072cbd.png"}),"../../../assets/images/thanksGive/games/bg_repeat.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/bg_repeat.80263873.png"}),"../../../assets/images/thanksGive/games/boy@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/boy@2x.937c8ae9.png"}),"../../../assets/images/thanksGive/games/miss@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/miss@2x.0af145d0.png"}),"../../../assets/images/thanksGive/games/music@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/music@2x.1a31fa3c.png"}),"../../../assets/images/thanksGive/games/pause_image@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/pause_image@2x.bf107f66.png"}),"../../../assets/images/thanksGive/games/piano@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/piano@2x.bf860150.png"}),"../../../assets/images/thanksGive/games/player@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/player@2x.032370b9.png"}),"../../../assets/images/thanksGive/games/player_shadow@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/player_shadow@2x.b4fbb171.png"}),"../../../assets/images/thanksGive/games/ready_image@2x.png":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:"./assets/ready_image@2x.579ecd56.png"})},di=750,ui=1448,mi=(e,t)=>{const s=Object.keys(e).find((e=>~e.indexOf(t)));return s?e[s].default:""},pi=[{time:8e3,interval:1500,count:1,enemy:{velocity:4,gravity:0}},{time:14e3,interval:2e3,count:2,enemy:{velocity:2.5,gravity:.5}},{time:25e3,interval:1e3,count:1,enemy:{velocity:5,gravity:1.5}},{time:35e3,interval:700,count:1,enemy:{velocity:6,gravity:3}},{time:6e4,interval:600,count:1,enemy:{velocity:12,gravity:4}},{time:8e4,interval:300,count:1,enemy:{velocity:17,gravity:5}},{time:0,interval:200,count:1,enemy:{velocity:21,gravity:6}}],gi=35100,hi=1e4,yi=3e3,vi=[{id:"background_header",src:mi(ci,"bg_header@2x.jpg")},{id:"background_main",src:mi(ci,"bg_main@2x.png")},{id:"background_main2",src:mi(ci,"bg_main2@2x.png")},{id:"background_footer",src:mi(ci,"bg_footer@2x.png")},{id:"ready_image",src:mi(ci,"ready_image@2x.png")},{id:"pause_image",src:mi(ci,"pause_image@2x.png")},{id:"player",src:mi(ci,"player@2x.png")},{id:"player_shadow",src:mi(ci,"player_shadow@2x.png")},{id:"music",src:mi(ci,"music@2x.png")},{id:"piano",src:mi(ci,"piano@2x.png")},{id:"boy",src:mi(ci,"boy@2x.png")},{id:"miss",src:mi(ci,"miss@2x.png")}],bi={piano:{frames:[[0,0,1500,142],[0,170,1500,142],[0,340,1500,142],[0,510,1500,142],[0,680,1500,142],[0,850,1500,142]],sprites:{shot:[0,1,2,3,4,5]}},boy:{frames:[[0,0,560,728],[0,728,560,728],[0,1456,560,728],[0,2184,560,728],[0,2912,560,728],[560,0,560,728],[560,728,560,728],[560,1456,560,728],[560,2184,560,728],[560,2912,560,728],[1120,0,560,728],[1120,728,560,728],[1120,1456,560,728],[1120,2184,560,728]],sprites:{shot:[0,1,2,3,4,5,6,7,8,9,10,11,12,13]}}},_i=new O.LoadQueue;let fi={},xi=0;var wi={load:()=>new Promise((e=>{_i.add(vi),_i.on("complete",(function(){vi.forEach((e=>{fi[e.id]=_i.get(e.id).content})),xi=2,e()})),_i.start(),xi=1})),getProgress:()=>_i.getLoaded()/_i.getTotal(),isLoaded:()=>2===xi,query:e=>fi[e]||null,queryFrames(e){return bi[e]?{image:this.query(e),frames:bi[e].frames,sprites:bi[e].sprites}:{}}};function Si(){const e=document.documentElement.clientWidth||window.outerWidth||document.body.clientWidth,t=document.documentElement.clientHeight||window.outerHeight||document.body.clientHeight;return Math.min(e/di,t/ui)}class ki extends O.Stage{constructor(e){const t=Si();super({renderType:"canvas",container:e,width:di,height:ui,scaleX:t,scaleY:t}),s(this,"stageWidth",0),s(this,"stageHeight",0),s(this,"ticker",new O.Ticker(60)),this.stageWidth=di,this.stageHeight=ui,this.ticker.addTick(O.Tween),this.ticker.addTick(this),this.ticker.start(!0)}changeSize(){const e=Si();this.scaleX=e,this.scaleY=e,this.resize(this.stageWidth,this.stageHeight,!0)}destroy(){this.removeAllChildren(),this.ticker&&this.ticker.stop()}}class Ai extends O.Container{constructor(e){super(e),s(this,"buttonStart",null),this.init()}init(){const e=wi.query("ready_image");let t=new O.Graphics({alpha:.7});t.beginFill("#000000"),t.drawRect(0,0,this.width,this.height),t.endFill();let s=new O.Bitmap({image:e,x:423,y:576,rect:[1199,12,311,270],scaleX:.6,scaleY:.6}),i=new O.Bitmap({image:e,x:111,y:386,rect:[12,345,1050,156],scaleX:.5,scaleY:.5}),a=new O.Bitmap({image:e,x:229,y:519,rect:[1086,345,589,239],scaleX:.5,scaleY:.5}),n=new O.Bitmap({image:e,x:146,y:1032,rect:[12,525,911,139],scaleX:.5,scaleY:.5}),o=new O.Bitmap({image:e,x:84,y:1140,rect:[12,12,1163,309],scaleX:.5,scaleY:.5}),l=this.buttonStart=new O.Bitmap({image:e,rect:[1534,12,264,264],scaleX:.5,scaleY:.5});l.x=309,l.y=783,this.addChild(t,s,i,a,n,o,l)}}const Ti=class extends O.Container{constructor(e){super(e),s(this,"player",null),s(this,"shadow",null),s(this,"tween",null),s(this,"playerBox",null),s(this,"direction","left"),s(this,"hp",0),s(this,"isGod",!1),s(this,"isDeath",!1);let t=wi.query("player"),i=this.player=new O.Bitmap({image:t,pivotX:t.width/2,scaleX:.5,scaleY:.5});t=wi.query("player_shadow"),this.shadow=new O.Bitmap({image:t,pivotX:t.width/2,scaleX:.5,scaleY:.5});let a=this.playerBox=new O.Bitmap({y:163,width:100,height:40});this.addChild(i,a),this.init()}init(){this.hp=Ti.MaxHP,this.player.x=this.width/2,this.shadow.x=this.player.x,this.shadow.y=(this.player.getScaledHeight()-this.shadow.getScaledHeight())/2,this.shadow.alpha=0,this.playerBox.x=this.player.x-120,this.isDeath=!1}hitTestBox(e,t){return this.playerBox.hitTestObject(e,t)}hurtDamage(e=1){return this.isGod||(this.hp-=e,this.hp<=0&&(this.isDeath=!0)),this.isDeath}hurtDeath(){return this.isGod||(this.isDeath=!0),this.isDeath}enterGodMode(){this.isGod=!0,this.addChild(this.shadow),this.tween=O.Tween.to(this.shadow,{alpha:1},{duration:600,loop:!0,reverse:!0})}exitGodMode(){this.isGod=!1,this.tween.stop(),this.removeChild(this.shadow)}reverseDraw(e){if(e===this.direction)return;const t=this.player,s=this.shadow,i=this.playerBox;"left"===e?(t.scaleX=.5,s.scaleX=.5,i.x=t.x-120,this.direction=e):"right"===e&&(t.scaleX=-.5,s.scaleX=-.5,i.x=t.x+20,this.direction=e)}};let Mi=Ti;s(Mi,"MaxHP",10);const Pi=class extends O.Bitmap{constructor(e){super({image:wi.query("music"),rect:e?[0,200,162,180]:[0,0,162,180],pivotX:81,pivotY:90,scaleX:.5,scaleY:.5}),s(this,"isDangerous",!1),s(this,"speed",0),s(this,"velocity",1),s(this,"gravity",1),this.isDangerous=e}init(e=1,t=1){this.velocity=e,this.gravity=t,this.speed=0}updateSpeed(e){let t=e>25?e/25:1;return(++this.speed/10*(.5*this.gravity)+this.velocity)*t}static produce(e){if(Pi.EnemyPool.length>0){const t=Pi.EnemyPool.pop();return t.init(),t.visible=!0,e!==t.isDangerous&&(t.isDangerous=e,t.setImage(wi.query("music"),e?[0,200,162,180]:[0,0,162,180])),t}return new Pi(e)}static reclaim(e){~Pi.EnemyPool.indexOf(e)||(Pi.EnemyPool.push(e),e.visible=!1,e.removeFromParent())}static destroy(){Pi.EnemyPool.forEach((e=>{e.removeFromParent()})),Pi.EnemyPool=[]}};let qi=Pi;s(qi,"EnemyPool",[]);class ji extends O.Container{constructor(e){super(e),s(this,"viewTop",null),s(this,"viewBottom",null),this.init()}init(){const e=wi.query("pause_image");let t=new O.Graphics({alpha:.7});t.beginFill("#000000"),t.drawRect(0,0,this.width,this.height),t.endFill();let s=this.viewTop=new O.Bitmap({image:e,rect:[5,1036,952,398],scaleX:.5,scaleY:.5}),i=this.viewBottom=new O.Bitmap({image:e,rect:[5,5,879,1021],scaleX:.5,scaleY:.5});s.x=135,s.y=414,i.x=156,i.y=719,this.addChild(t,s,i)}}class Ci extends O.Container{constructor(e){super(e),s(this,"bgImage",null),s(this,"piano",null),s(this,"boy",null),s(this,"speed",0),this.init()}init(){const e=this.bgImage=new O.Bitmap({image:wi.query("background_header"),scaleX:.5,scaleY:.5}),t=new O.TextureAtlas(wi.queryFrames("piano")),s=new O.TextureAtlas(wi.queryFrames("boy")),i=this.piano=new O.Sprite({y:219,width:750,height:71,interval:1});i.addFrame(t.getSprite("shot"));const a=this.boy=new O.Sprite({x:235,width:280,height:364,interval:1});a.addFrame(s.getSprite("shot")),this.playSpeed(pi.length),this.stopAnimation(),this.addChild(e,i,a)}stopAnimation(){this.piano.stop(),this.boy.stop()}playAnimation(){this.piano.play(),this.boy.play()}playSpeed(e){this.piano.interval=3*e,this.boy.interval=e}setLevelSpeed(e){const t=Math.min(pi.length-e,6);this.playSpeed(t)}}class Ei extends O.Container{constructor(e){super(e),s(this,"pauseScene",null),s(this,"scoreText",null),s(this,"mainView",null),s(this,"pointerView",null),s(this,"headerView",null),s(this,"missEffect",null),s(this,"gamePlayer",null),s(this,"enemy",[]),s(this,"ticker",null),s(this,"positions",[]),s(this,"scoreTime",0),s(this,"currentLevel",0),s(this,"enterGodTime",0);for(let s=0;s<5;s++)this.positions.push(this.width/5*s);let t=wi.query("background_main"),i=this.mainView=new O.Bitmap({image:t,y:364,scaleX:.5,scaleY:.5});t=wi.query("miss");let a=this.missEffect=new O.Bitmap({x:this.width/2-t.width/4,y:this.height/2-t.height/4,image:t,pivotX:t/2,pivotY:t/2,scaleX:.5,scaleY:.5,visible:!1}),n=this.gamePlayer=new Mi({y:855,width:258,height:288}),o=this.headerView=new Ci({x:0,y:0,width:this.width,height:364}),l=new O.Graphics;l.beginFill("#FDE792"),l.drawCircle(654,32,30),l.endFill(),l.cache();let r=this.scoreText=new O.Text({x:654,y:50,width:60,textAlign:"center",color:"#163C83"});r.setFont("24px Arial");let c=this.pointerView=new O.Bitmap({image:wi.query("background_footer"),y:1122,scaleX:.5,scaleY:.5});this.touchBindPlayer(c),this.addChild(i,a,n,o,l,r,c),this.pauseScene=new ji({width:this.width,height:this.height}),this.init()}init(){this.scoreTime=0,this.currentLevel=0,this.enterGodTime=0,this.scoreText.text=Math.floor(this.scoreTime/1e3)+"S",this.gamePlayer.x=(this.width-this.gamePlayer.width)/2,this.gamePlayer.init(),this.headerView.setLevelSpeed(this.currentLevel)}touchBindPlayer(e){const t=this.gamePlayer;let s=0;e.on(O.event.POINTER_START,(e=>{s=e.stageX})),e.on(O.event.POINTER_MOVE,(e=>{let i=e.stageX-s;t.x=Math.max(t.x+i,0),t.x=Math.min(t.x,this.width-t.width),Math.abs(i)>=2.4&&t.reverseDraw(i>0?"right":"left"),s=e.stageX}))}runGame(){this.init(),this.headerView.playAnimation();const e=100;let t=0,s=0;this.ticker=new O.Ticker,this.ticker.interval((()=>{this.scoreTime+=t<=134?t:e,this.scoreText.text=Math.floor(this.scoreTime/1e3)+"S",t=0,s+=e;const i=pi[this.currentLevel];s%i.interval==0&&(this.produceEnemy(),i.time>0&&s>=i.time&&(this.currentLevel++,this.headerView.setLevelSpeed(this.currentLevel),console.log("游戏等级升级为",this.currentLevel))),this.enterGodTime<=0&&this.scoreTime>=gi&&(this.enterGodTime=this.scoreTime,this.enterGodMode())}),e),this.ticker.start();const i=e=>{this.gamePlayer.hitTestBox(e)&&(e.isDangerous&&this.gamePlayer.hurtDeath()&&(this.gamePlayer.onUpdate=()=>{t<s&&(this.scoreTime+=t),this.gameOver(),this.gamePlayer.onUpdate=null}),this.destroyEnemy(e,!0))};this.gamePlayer.onUpdate=e=>{t+=e,this.enemy.forEach(i)}}enterGodMode(){this.ticker.pause(),this.destroyEnemyAll(),this.gamePlayer.visible=!1,this.gamePlayer.x=(this.width-this.gamePlayer.width)/2,this.gamePlayer.reverseDraw("left"),this.gamePlayer.enterGodMode(),this.mainView.setImage(wi.query("background_main2"));const e=new O.Ticker;e.timeout((()=>{this.removeChild(this.pauseScene),this.gamePlayer.visible=!0,this.ticker.resume(),e.timeout((()=>{this.exitGodMode()}),hi)}),yi),e.start(),this.pauseScene.alpha=0,this.addChild(this.pauseScene),O.Tween.to(this.pauseScene,{alpha:1},{duration:500})}exitGodMode(){this.mainView.setImage(wi.query("background_main")),this.gamePlayer.exitGodMode()}gameOver(){this.fire("gameover",{time:this.scoreTime,miss:Mi.MaxHP-this.gamePlayer.hp}),this.gamePlayer.init(),this.headerView.stopAnimation(),this.ticker.stop(),this.destroyEnemyAll(),qi.destroy()}produceEnemy(){const e=pi[this.currentLevel],t=this.headerView.getScaledHeight(),s=this.positions.sort((()=>.5-Math.random())).slice(0,e.count);for(let i=0;i<e.count;i++){const i=qi.produce(Math.random()>=.8);i.x=s.pop()+74,i.y=t-45,i.init(e.enemy.velocity,e.enemy.gravity),i.onUpdate=e=>{i.y+=i.updateSpeed(e),i.y>this.pointerView.y&&(this.destroyEnemy(i,!1),i.isDangerous||(this.playMissEffect(),this.gamePlayer.hurtDamage(1)&&this.gameOver()))},this.enemy.push(i),this.addChildAt(i,this.getChildIndex(this.headerView))}}playMissEffect(){if(!this.missEffect.visible&&!this.gamePlayer.isGod){const e=this.missEffect.y;this.missEffect.visible=!0,this.missEffect.y=this.pointerView.y,O.Tween.to(this.missEffect,{y:e},{duration:360,ease:O.Ease.Quad.EaseOut,onComplete:()=>{this.missEffect.visible=!1}})}}destroyEnemy(e,t=!1){const s=this.enemy.indexOf(e);s>=0&&this.enemy.splice(s,1),e.onUpdate=null,t?O.Tween.to(e,{rotation:360,alpha:.2},{duration:266,ease:O.Ease.Quad.EaseInOut,onComplete:()=>{e.rotation=0,e.alpha=1,qi.reclaim(e)}}):qi.reclaim(e)}destroyEnemyAll(){this.enemy.forEach((e=>{qi.reclaim(e)})),this.enemy=[]}}class Oi{constructor(e){s(this,"stage",null),s(this,"readyScene",null),s(this,"playScene",null),wi.load().then((()=>{this.init(e)})).catch((e=>{console.log("init",e)})),Object.assign(this,O.EventMixin),this.stage=new ki(e)}drawProgress(e){e.style.display="block";const t=setInterval((()=>{const s=wi.getProgress();s>=1?(e.style.display="none",clearInterval(t)):e.innerText="加载中: "+(100*s).toFixed(2)+"%"}),33)}init(){const e=this.stage;e.enableDOMEvent(O.event.POINTER_START,!0),e.enableDOMEvent(O.event.POINTER_MOVE,!0);(this.playScene=new Ei({width:e.width,height:e.height})).addTo(this.stage);const t=this.readyScene=new Ai({width:e.width,height:e.height});t.buttonStart.on(O.event.POINTER_START,(e=>{e.stopImmediatePropagation&&e.stopImmediatePropagation();let t=!0;this.fire("startBefore",{callback:e=>{t=!!e}}),t&&this.gameReady()})),t.addTo(this.stage)}toReadyScene(){this.playScene.init(),this.readyScene.visible=!0}gameReady(){this.readyScene.visible=!1,this.playScene.runGame(),this.playScene.on("gameover",(({detail:e})=>{console.log(`你一共坚持了${e.time}毫秒, Miss数量:${e.miss}`),this.fire("gameover",e)}),!0)}changeSize(){this.stage.changeSize()}destroy(){this.playScene.ticker&&this.playScene.ticker.stop(),this.stage.destroy(),this.readyScene=null,this.playScene=null}}const zi={props:{nickname:String,avatar:String,missCount:Number,scoreTime:Number,playerRank:Number},emits:["closeView","againGame"],setup(e,s){const i=y(null),a=y(null),n=y(null),o=y(null),l=g({posterImageBase64:"",qrcodeImage:"",showPoster:!1});return z((()=>{document.documentElement.scrollTop=document.body.scrollTop=0,setTimeout((()=>{const e=i.value,t={width:1*e.offsetWidth,height:1*e.offsetHeight,x:0,y:0,scrollX:0,scrollY:0,proxy:!0,useCORS:!0,onclone:!0,scale:Math.min(Math.ceil(window.devicePixelRatio||1),2),removeContainer:!0,backgroundColor:null};B(e,t).then((e=>{n.value.appendChild(e),l.posterImageBase64=e.toDataURL("image/png"),l.showPoster=!0}))}),200)})),t(t({},_(l)),{rankText:e=>e<=70?`TOP${e}`:e<=999?e:"999+",timeText:e=>{let t=Math.floor(e/6e4),s=Math.floor((e-60*t*1e3)/1e3),i=e-1e3*(60*t+s),a=Math.floor(i/10);return`${t>=1?t+"分":""}${s}秒${a<10?"0"+a:a}`},againGame:()=>{s.emit("againGame"),s.emit("closeView")},RefPoster:i,RefQrcode:a,RefOutput:n,RefContent:o})}},Bi=p("data-v-c895c292");i("data-v-c895c292");const Vi={class:"popup-content",ref:"RefPoster",key:"poster"},Gi=d("img",{class:"bg-image",src:"./assets/gameover@2x.a773933c.png",alt:""},null,-1),Ri={class:"header"},Li={class:"header-text"},Di=d("p",{class:"header-text"},"在母上大人从业挑战赛中获得成绩",-1),Ii={class:"game-info"},Yi={class:"info-first"},Hi=d("span",null,"游戏时长",-1),Xi={class:"info-second"},Ki=d("span",null,"音符Miss",-1),Qi={class:"info-three"},Ui=d("span",null,"最优排名",-1),Fi={class:"qrcode",ref:"RefQrcode"},Wi={class:"popup-output",key:"output"},Ni={class:"popup-center"},Zi=d("p",{class:"hold-tips"},"长按保存海报",-1),Ji={class:"button-group"},$i={class:"output",ref:"RefOutput"},ea={key:2,class:"full-msak"};a();const ta=Bi(((e,t,s,i,a,n)=>(o(),l("div",{class:["popup-bg",{complete:e.showPoster}]},[e.showPoster?(o(),l("div",Wi,[d("div",Ni,[d("img",{src:e.posterImageBase64,alt:"",ref:"RefContent"},null,8,["src"]),Zi,d("div",Ji,[d("div",{class:"continue",onClick:t[1]||(t[1]=e=>i.againGame())},"继续挑战")])])])):(o(),l("div",Vi,[Gi,d("div",Ri,[d("img",{class:"avatar-image",src:s.avatar,alt:""},null,8,["src"]),d("p",Li,u(s.nickname),1),Di]),d("div",Ii,[d("p",Yi,[Hi,V(u(i.timeText(s.scoreTime)),1)]),d("p",Xi,[Ki,V(u(s.missCount)+"个",1)]),d("p",Qi,[Ui,V(u(i.rankText(s.playerRank)),1)])]),d("div",Fi,null,512)],512)),d("div",$i,null,512),e.showPoster?k("",!0):(o(),l("div",ea))],2))));zi.render=ta,zi.__scopeId="data-v-c895c292";const sa={components:{GameOver:zi},setup(){const e=g({gameover:!1,avatar:"",nickname:"游客",playCoin:99,scoreTime:0,missCount:0,playerRank:1e3}),s=y(null),i=y(null);let a=null;const n=()=>{setTimeout((()=>{a&&a.stage&&a.stage.changeSize()}),100)};return z((()=>{a=new Oi(s.value),a.drawProgress(i.value),a.on("gameover",(({detail:t})=>{(({time:t,miss:s})=>(e.gameover=!0,e.scoreTime=t,e.missCount=s,Promise.resolve()))(t).then((()=>{a.toReadyScene()}))})),window.addEventListener("resize",n)})),E((()=>{a.destroy(),window.removeEventListener("resize",n)})),t(t({},_(e)),{againGame:()=>{e.playCoin<=0&&console.log("次数不足")},RefGame:s,RefProgress:i})}},ia=p("data-v-119e33e6");i("data-v-119e33e6");const aa={class:"game-wrap"},na={class:"canvas-center",ref:"RefGame"},oa={class:"progress",ref:"RefProgress"},la=d("div",{class:"portrait-tips"},[d("img",{src:"./assets/portrait@2x.5b322a31.png",alt:""}),d("p",{class:"tips"},[V("请旋转屏幕使用"),d("span",null,"竖屏"),V("体验游戏")])],-1);a();const ra=ia(((e,t,s,i,a,n)=>{const r=x("game-over");return o(),l("div",aa,[d("div",na,null,512),d("div",oa,null,512),la,e.gameover?(o(),l(r,{key:0,avatar:e.avatar,nickname:e.nickname,missCount:e.missCount,scoreTime:e.scoreTime,playerRank:e.playerRank,onComplete:t[1]||(t[1]=e=>"此处应该closeLoding"),onAgainGame:i.againGame,onCloseView:t[2]||(t[2]=t=>e.gameover=!1)},null,8,["avatar","nickname","missCount","scoreTime","playerRank","onAgainGame"])):k("",!0)])}));sa.render=ra,sa.__scopeId="data-v-119e33e6";var ca=[{path:"/thanksgive/home",name:"ThanksGiveHome",component:sa,meta:{title:"接音符",root:75}}],da=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ca});const ua=[{type:"warning",name:"音乐派对游戏",link:"/musicparty/home",notes:"这是一个音乐合成小游戏，将多个乐器组成一段合奏。合成后可以分享给他人聆听你的创作。",content:"音频部分使用howler进行合成，动画使用序列帧 + css的@keyframes进行控制"},{type:"success",name:"web视频交互组件",link:"/hellovideo/home",notes:"原生video封装的互动视频播放器，播放至指定但时间节点可以进行交互。",content:"Android尝试使用全屏事件，但IOS不支持全屏事件，所以将web旋转90度做伪横屏处理"},{type:"danger",name:"接音符游戏",link:"/thanksgive/home",notes:"一个接音符的小游戏，滑动底部控制小人左右移动。",content:"使用hilojs作为游戏引擎制作；保证不同屏幕尺寸下的公平性。"}],ma={components:{Button:G,ActionSheet:R},setup(){const e=g({show:!1,current:{}});return t(t({text:"text",show:y(!1),buttons:g(ua)},_(e)),{showSheet:t=>{e.current=t,e.show=!0}})}},pa=p("data-v-3bad38f9");i("data-v-3bad38f9");const ga=d("div",{class:"background"},[d("span"),d("span"),d("span"),d("span"),d("span"),d("span"),d("span"),d("span"),d("span"),d("span")],-1),ha={class:"wrapper"},ya={class:"main"},va={class:"to-blog",href:"https://bishaoxia.gitee.io",target:"_blank"},ba=V("前往我的博客"),_a=d("h5",{class:"title"},"【毕俊】随便的主页",-1),fa=d("h5",{class:"title-2"},"欢迎访问毕俊的小站，这是一个使用Vue3 + Vite构建的项目，目的是学习新的事物。",-1),xa=d("p",{class:"text"}," 学习最好的方法是动手，于是将以前的几个小项目使用Vue3进行了重构，尝鲜了compositionAPI，体会到了Vue3开发上的一些改变：",-1),wa=d("br",null,null,-1),Sa=d("div",{class:"holder-bottom"},[d("p",{class:"tips"},[V(" *推荐使用移动端进行体验"),d("br"),V(" *首页没什么审美做的比较随意 ")])],-1),ka={class:"sheet"},Aa={class:"title"},Ta={class:"section"},Ma=d("div",{class:"left"},"介绍：",-1),Pa={class:"right"},qa={class:"section"},ja=d("div",{class:"left"},"技术点：",-1),Ca={class:"right"},Ea={class:"center"},Oa=V("进入Demo");a();const za=pa(((e,t,s,i,a,n)=>{const r=x("Button"),c=x("router-link"),m=x("action-sheet");return o(),l(w,null,[ga,d("div",ha,[d("div",ya,[d("a",va,[d(r,{icon:"wap-home-o",type:"primary"},{default:pa((()=>[ba])),_:1})]),_a,fa,xa,wa,(o(!0),l(w,null,S(i.buttons,((e,t)=>(o(),l(r,{key:t,type:e.type,size:"large",style:{"margin-bottom":"5px"},onClick:t=>i.showSheet(e)},{default:pa((()=>[V(" 查看"+u(e.name),1)])),_:2},1032,["type","onClick"])))),128))])]),Sa,d(m,{show:i.show,"onUpdate:show":t[1]||(t[1]=e=>i.show=e),title:"作品简介"},{default:pa((()=>[d("div",ka,[d("p",Aa,u(e.current.name),1),d("section",Ta,[Ma,d("div",Pa,u(e.current.notes),1)]),d("section",qa,[ja,d("div",Ca,u(e.current.content),1)])]),d("p",Ea,[d(c,{to:e.current.link},{default:pa((()=>[d(r,{type:"primary"},{default:pa((()=>[Oa])),_:1})])),_:1},8,["to"])])])),_:1},8,["show"])],64)}));ma.render=za,ma.__scopeId="data-v-3bad38f9";const Ba={},Va=p("data-v-9811e74e");i("data-v-9811e74e");const Ga=d("p",{class:"text"},"页面未找到",-1);a();const Ra=Va(((e,t,s,i,a,n)=>(o(),l("div",null,[Ga]))));Ba.render=Ra,Ba.__scopeId="data-v-9811e74e";const La={"./modules/helloVideo.js":He,"./modules/musicParty.js":ri,"./modules/thanksGive.js":da};var Da=[{path:"/",component:ma,meta:{title:"毕俊的主页",root:75}},{path:"/:pathMatch(.*)*",component:Ba},...Object.keys(La).reduce(((e,t)=>e.concat(La[t].default)),[])];const Ia=L({history:D(),routes:Da});Ia.beforeEach(((e,t,s)=>{const i=e.meta||{};e.meta.title&&(document.title=i.title);const a=document.querySelector("html");i.root?a.setAttribute("ipad",`${i.root}`):a.getAttribute("id")&&a.removeAttribute("id"),s()}));const Ya={};Ya.render=function(e,t,s,i,a,n){const r=x("router-view");return o(),l(r)};const Ha={name:"App",components:{AppRouter:Ya}};Ha.render=function(e,t,s,i,a,n){const r=x("app-router");return o(),l(r)};const Xa=I(Ha);Xa.use(Ia),Xa.mount("#app");
